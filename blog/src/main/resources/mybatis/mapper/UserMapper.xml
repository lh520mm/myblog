<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.h52mm.blog.domain.dao.UserDao">
    <resultMap id="BaseResultMap" type="com.h52mm.blog.domain.entity.User">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="ROW_ID" jdbcType="VARCHAR" property="rowId"/>
        <result column="ACCOUNT" jdbcType="VARCHAR" property="account"/>
        <result column="NICKNAME" jdbcType="VARCHAR" property="nickname"/>
        <result column="PWD" jdbcType="VARCHAR" property="pwd"/>
        <result column="HEAD_PORTRAIT" jdbcType="VARCHAR" property="headPortrait"/>
        <result column="OPPEN_ID" jdbcType="VARCHAR" property="oppenId"/>
        <result column="TEL" jdbcType="VARCHAR" property="tel"/>
        <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime"/>
        <result column="STATE" jdbcType="BIT" property="state"/>
        <result column="IS_DEL" jdbcType="BIT" property="isDel"/>
        <result column="ROLE_ID" jdbcType="INTEGER" property="roleId"/>
        <result column="JOB_NAME" jdbcType="VARCHAR" property="jobName"/>
        <result column="RANK_NAME" jdbcType="VARCHAR" property="rankName"/>
        <result column="COMBAT_POWER" jdbcType="INTEGER" property="combatPower"/>
        <result column="ROLE_NAME" jdbcType="VARCHAR" property="roleName"/>
        <result column="SEX" jdbcType="BIT" property="sex"/>
        <result column="AGE" jdbcType="INTEGER" property="age"/>
    </resultMap>




    <select id="getUserByAccount" resultMap="BaseResultMap">
         select u.*,r.ROLE_ID from t_user u LEFT JOIN t_user_role r on u.ROW_ID=r.USER_ID and r.IS_DEL='0' where u.IS_DEL='0' and ACCOUNT=#{account}
    </select>

    <select id="getUserByRowId" resultMap="BaseResultMap">
         select u.*,r.ROLE_ID from t_user u LEFT JOIN t_user_role r on u.ROW_ID=r.USER_ID and r.IS_DEL='0' where u.IS_DEL='0' and u.ROW_ID=#{rowId}
    </select>

</mapper>